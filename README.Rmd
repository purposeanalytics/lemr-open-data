---
output: github_document
editor_options: 
  chunk_output_type: console
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%",
  message = FALSE
)
```
# lemropendata

`lemropendata` is an R interface to the [LEMR Open Data Portal](http://20.220.163.227). The goal of the package is to help read data directly into R without needing to manually download it via the portal.

## Installation

You can install the development version from GitHub with:

``` r
devtools::install_github("purposeanalytics/lemr-open-data")
```

## Usage

In the Portal, datasets are called **packages**. You can see a list of available packages by using `list_packages()`. This will show metadata about the package, including what topics (i.e. tags) the package covers, any civic issues it addresses, a description of it, how many resources there are (and their formats), how often it is is refreshed and when it was last refreshed.

```{r list-packages-example}
library(lemropendata)
packages <- list_packages()
packages
```

You can also search packages by title:

```{r search-packages-example}
to_building_registry_package <- search_packages("Toronto Apartment Building Registry")

to_building_registry_package
```

Within a package, there are a number of **resources** - e.g. CSV, XSLX, JSON, SHP files, and more. Resources are the actual "data".

For a given package, you can get a list of resources using `list_package_resources()`. You can pass it the package:

```{r list-marriage-license-resources}
to_building_registry_resources <- to_building_registry_package %>%
  list_package_resources()

to_building_registry_resources
```

Finally (and most usefully!), you can download the resource (i.e., the actual data) directly into R using `get_resource()`:

```{r get-marriage-licenses}
library(dplyr)

to_building_registry_zone <- to_building_registry_resources %>%
  filter(name == "toronto_apartment_building_registry-zone.csv") %>%
  get_resource()

to_building_registry_zone
```
